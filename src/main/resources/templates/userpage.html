<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/fragments :: head(title='BestForumEver')">
        <meta charset="UTF-8" />
        <title>BestForumEver</title>
    </head>
    <body>
        <header th:replace="fragments/fragments :: header">
            <p>navbar</p>
        </header>

        <div class="jumbotron text-center" style="margin-bottom:0">
            <h1 th:text="${targetAccount.username}">username</h1>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-3">
                    <div class="container">
                        <h2>Images:</h2>
                        <ul>
                            <li th:each="image : ${targetAccount.postedImages}">

                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-6">
                    <div class="container">
                        <h2>Posts:</h2>
                        <ul>
                            <li th:each="post : ${posts}">
                                <h4 th:text="${post.poster.username}" style="word-wrap:break-word">poster</h4>
                                <h5 th:text="${post.creationDate}" style="word-wrap:break-word">postCreationDate</h5>
                                <p th:text="${post.content}" style="word-wrap:break-word">PostContent</p>

                                <ul>
                                    <li th:each="i, iterStat : ${#numbers.sequence(post.comments.size() - 1, 0, -1)}" th:if="${iterStat.index < 10}">
                                        <h6 th:text="${post.comments[i].commentor.username}" style="word-wrap:break-word">Commentor</h6>
                                        <h6 th:text="${post.comments[i].creationDate}" style="word-wrap:break-word">CommentCreationDate</h6>
                                        <p th:text="${post.comments[i].comment}" style="word-wrap:break-word">comment</p>
                                    </li>
                                </ul>

                                <form th:action="@{/comment/{identifier}/{postid}/{commentor}(identifier=${targetAccount.identifier}, postid=${post.id}, commentor=${account.username})}" method="POST">
                                    <div class="form-group">
                                        <textarea rows="2" name="comment" class="form-control"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <input type="submit" value="Comment!" class="btn btn-primary"/>
                                    </div>
                                </form>
                            </li>
                        </ul>

                        <form th:action="@{/post/{identifier}/{poster}(identifier=${targetAccount.identifier}, poster=${account.username})}" method="POST">
                            <h4>Post new post</h4>
                            <div class="form-group">
                                <textarea rows="10" name="content" class="form-control"></textarea>
                            </div>
                            <div class="form-group">
                                <input type="submit" value="Post!" class="btn btn-primary"/>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-2">
                    <div class="container">
                        <h2>Friends:</h2>
                        <ul>
                            <li th:each="friend : ${targetAccount.friends}">

                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-1">
                    <div class="container">
                        <h5>Actions</h5>

                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-2">
                    <a th:if="${pagenumber > 0}" th:href="@{/users/{identifier}/{lastpage} (identifier=${account.identifier}, lastpage=${pagenumber - 1})}">Last page</a>
                </div>
                <div class="col-8">
                    
                </div>
                <div class="col-2">
                    <a th:if="${targetAccount.posts.size() - ((pagenumber + 1) * 25) > 0}" th:href="@{/users/{identifier}/{nextpage} (identifier=${account.identifier}, nextpage=${pagenumber + 1})}">Next page</a>
                </div>
            </div>
        </div>
    </body>
</html>